# @package _global_

# python src/cli/train.py +experiment=species_detector
defaults:
  - override /data: soundscape_vae_embeddings
  - override /model: species_detector
  - override /trainer: gpu
  - override /logger: wandb

name: interpretable_bioacoustic_classifiers
results_dir: ${paths.results_dir}/${logger.wandb.project}/${name}/${data.scope}/${data.model}/${data.version}

train: true
test: true
seed: 42

data:
  root: ${paths.data_dir}/soundscape_vae_embeddings

trainer:
  log_every_n_steps: 1

callbacks:
  model_checkpoint:
    dirpath: ${results_dir}/checkpoints
    filename: epoch_{epoch:03d}
    monitor: val/loss
    mode: min
    save_top_k: -1
    auto_insert_metric_name: False
    save_last: True
  species_scores:
    _target_: src.core.callbacks.species_scores.SpeciesScores
    run_id: ${run_id}
    save_dir: ${results_dir}

logger:
  wandb:
    id: ${run_id}
    resume: null
    project: interpretable_bioacoustic_classifiers
    group: ${data.scope}
