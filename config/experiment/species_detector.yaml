# @package _global_

# python src/cli/train.py +experiment=species_detector
defaults:
  - override /data: soundscape_embeddings
  - override /model: species_detector
  - override /trainer: gpu
  - override /logger: wandb

project: species_cross_validation
group: test
results_dir: ${paths.results_dir}/${project}/${group}

train: true
test: true
seed: 42

data:
  root: ${paths.data_dir}/soundscape_vae_embeddings

trainer:
  max_epochs: 2000
  log_every_n_steps: 1

callbacks:
  model_checkpoint:
    dirpath: ${results_dir}/checkpoints/${run_id}
    filename: epoch_{epoch:03d}
    monitor: val/loss
    mode: min
    save_top_k: -1
    auto_insert_metric_name: False
    save_last: True
  species_scores:
    _target_: src.core.callbacks.species_scores.SpeciesScores
    model: ${data.model}
    version: ${data.version}
    scope: ${data.scope}
    save_dir: ${results_dir}
    run_id: ${run_id}
    fold_id: ${data.fold_id}

logger:
  wandb:
    id: ${run_id}
    resume: null
    project: ${project}
    group: ${group}
